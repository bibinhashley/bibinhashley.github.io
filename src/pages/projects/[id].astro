---
import Layout from '../../layouts/Layout.astro';
import Navigation from '../../components/Navigation';
import { projects } from '../../data/projects';
import { ArrowLeft, Github, ExternalLink } from 'lucide-react';
import { marked } from 'marked';

export async function getStaticPaths() {
  return projects.map((project) => ({
    params: { id: project.id },
    props: { project },
  }));
}

const { project } = Astro.props;
const contentHtml = marked.parse(project.fullDescription);

const seoTitle = project.seo?.title || `${project.title} | Case Study | Bibin Hashley`;
const seoDescription = project.seo?.description || `Detailed case study of ${project.title} - ${project.description}`;
const seoKeywords = `${project.tech.join(', ')}, ${project.title}, AI Case Study, Python Developer Portfolio, Software Engineering`;
---

<Layout title={seoTitle} description={seoDescription} keywords={seoKeywords}>
  <Navigation client:load />
  <main class="min-h-screen pt-32 pb-20 px-4 md:px-8 max-w-4xl mx-auto relative z-10">
    <a href="/#projects" class="inline-flex items-center gap-2 text-gray-400 hover:text-white mb-12 transition-colors group font-mono text-sm">
      <ArrowLeft size={16} class="group-hover:-translate-x-1 transition-transform" />
      ./Back_to_Projects
    </a>

    <header class="mb-16 border-b border-gray-800 pb-12">
      <div class="flex items-center gap-6 mb-8">
        <div class="p-4 rounded-2xl bg-gray-800/50 text-accent-400 border border-gray-700/50 shadow-lg shadow-accent-500/10">
          <project.icon size={48} strokeWidth={1.5} />
        </div>
        <div>
            <h1 class="text-4xl md:text-5xl font-bold text-white mb-4 tracking-tight">{project.title}</h1>
            <div class="flex flex-wrap gap-3">
            {project.tech.map((t) => (
                <span class="px-3 py-1 text-sm bg-gray-900 text-gray-300 rounded-full border border-gray-700 font-mono">
                {t}
                </span>
            ))}
            </div>
        </div>
      </div>
      
      <p class="text-xl text-gray-300 leading-relaxed max-w-2xl font-light">
        {project.description}
      </p>

      <div class="flex gap-4 mt-8">
        {project.github !== "#" && (
            <a href={project.github} target="_blank" rel="noopener noreferrer" class="flex items-center gap-2 px-6 py-3 bg-gray-800 hover:bg-gray-700 text-white rounded-lg border border-gray-600 transition-all hover:scale-105 font-medium">
            <Github size={20} />
            View Code
            </a>
        )}
        {project.link !== "#" && (
            <a href={project.link} target="_blank" rel="noopener noreferrer" class="flex items-center gap-2 px-6 py-3 bg-primary-600 hover:bg-primary-700 text-white rounded-lg shadow-lg shadow-primary-500/20 transition-all hover:scale-105 font-medium">
            <ExternalLink size={20} />
            Live Demo
            </a>
        )}
      </div>
    </header>

    <article class="prose prose-invert prose-lg max-w-none prose-headings:font-bold prose-headings:text-white prose-a:text-accent-400 prose-code:text-accent-300 prose-pre:bg-gray-900 prose-pre:border prose-pre:border-gray-800">
        <div set:html={contentHtml} />
    </article>

  </main>
</Layout>
