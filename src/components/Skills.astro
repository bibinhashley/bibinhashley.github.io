---
import { Code2, Layout, Brain, BarChart3, Database, Cloud, Network, Activity, Globe } from 'lucide-react';

const skillCategories = [
  {
    title: "Languages",
    skills: ["Python", "JavaScript", "SQL", "Java", "Kotlin"],
    icon: Code2,
    color: "text-blue-400"
  },
  {
    title: "Backend Frameworks",
    skills: ["Flask", "FastAPI", "Django"],
    icon: Layout,
    color: "text-purple-400"
  },
  {
    title: "AI & LLM Tools",
    skills: ["OpenAI APIs", "Prompt Engineering", "Content Gen", "Fine-tuning", "Workflows"],
    icon: Brain,
    color: "text-blue-400"
  },
  {
    title: "Data & ML",
    skills: ["NumPy", "Pandas", "scikit-learn", "Basic ML", "Data Analysis"],
    icon: BarChart3,
    color: "text-purple-400"
  },
  {
    title: "Databases",
    skills: ["PostgreSQL", "ClickHouse"],
    icon: Database,
    color: "text-blue-400"
  },
  {
    title: "Cloud Infrastructure",
    skills: ["GCP", "Docker", "CI/CD Pipelines", "Git"],
    icon: Cloud,
    color: "text-purple-400"
  },
  {
    title: "API & Integrations",
    skills: ["REST API Design", "3rd-party Integrations", "Freshdesk Apps", "YouTrack Apps", "OAuth"],
    icon: Network,
    color: "text-blue-400"
  },
  {
    title: "Monitoring & Ops",
    skills: ["Zabbix", "Logging", "Observability", "Agile Practices"],
    icon: Activity,
    color: "text-purple-400"
  },
  {
    title: "Domain Expertise",
    skills: ["AI Content Systems", "SEO Automation", "SaaS Backend", "Workflow Automation"],
    icon: Globe,
    color: "text-blue-400"
  }
];
---

<section id="skills" class="py-20 md:py-32 px-4 relative overflow-hidden">
  <div class="max-w-7xl mx-auto relative z-10">
    <div class="mb-12 text-left">
      <h2 class="text-2xl md:text-5xl font-bold font-mono text-white">
        <span class="text-accent-500">./</span>Skills
      </h2>

    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="cards-container">
      {skillCategories.map((category, index) => (
        <div 
          class="card group relative bg-[#0f141c]/80 border border-gray-800 rounded-xl p-6 h-full overflow-hidden transition-all duration-300 hover:border-gray-700 scroll-animate backdrop-blur-sm"
          style={`animation-delay: ${index * 50}ms`}
        >
          <div
            class="pointer-events-none absolute -inset-px opacity-0 transition duration-300 group-hover:opacity-100"
            style="background: radial-gradient(600px circle at var(--mouse-x, 0) var(--mouse-y, 0), rgba(168, 85, 247, 0.15), transparent 40%);"
          ></div>
          
          <div class="relative z-10 flex flex-col h-full">
            <div class="flex items-center gap-3 mb-6">
              <div class={`p-2.5 rounded-lg bg-[#1e293b]/50 border border-gray-700/50 ${category.color}`}>
                <category.icon size={24} />
              </div>
              <h3 class="text-lg font-bold text-white font-mono">
                {category.title}
              </h3>
            </div>
            
            <div class="flex flex-wrap gap-2 mt-auto">
              {category.skills.map((skill) => (
                <span 
                  class="text-xs px-3 py-1.5 rounded-md font-medium font-mono text-gray-300 bg-white/5 border border-white/5 transition-colors group-hover:border-white/10 group-hover:text-white group-hover:bg-white/10"
                >
                  {skill}
                </span>
              ))}
            </div>
          </div>
        </div>
      ))}
    </div>
  </div>
</section>

<style>
  .card:hover::before {
    opacity: 1;
  }
  
  .scroll-animate {
    opacity: 0;
    transform: translateY(20px);
    transition: opacity 0.5s ease-out, transform 0.5s ease-out;
  }

  .scroll-animate.visible {
    opacity: 1;
    transform: translateY(0);
  }
</style>

<script>
  const initSkills = () => {
    const container = document.getElementById("cards-container");
    
    if (container) {
      container.onmousemove = e => {
        for(const card of document.getElementsByClassName("card")) {
          const rect = card.getBoundingClientRect(),
                x = e.clientX - rect.left,
                y = e.clientY - rect.top;

          (card as HTMLElement).style.setProperty("--mouse-x", `${x}px`);
          (card as HTMLElement).style.setProperty("--mouse-y", `${y}px`);
        }
      };
    }

    const observerOptions = {
      threshold: 0.1,
      rootMargin: '0px 0px -50px 0px'
    };

    const observer = new IntersectionObserver((entries) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          entry.target.classList.add('visible');
        }
      });
    }, observerOptions);

    document.querySelectorAll('.scroll-animate').forEach((el) => {
      observer.observe(el);
    });
  };

  document.addEventListener('astro:page-load', initSkills);
</script>

